{% extends 'base.html' %}
{% load static %}

{% block title %}Paso 4 - Últimos Factores{% endblock %}

{% block content %}
<div class="container mt-0" style="max-width: 1000px;">
    <div class="shadow-sm p-4 mb-4 text-center" style="background-color: #f9f9f9; border-radius: 15px; border: 2px solid #007BFF;">
        <h2 class="text-center text-primary">Paso 4: Últimos Factores</h2>
    </div>

    <div class="shadow-sm p-4 mb-4 text-center" style="background-color: #f9f9f9; border-radius: 15px; border: 2px solid #007BFF;">
        <form method="post">
            {% csrf_token %}

            <!--Campo COUGHING-->
            <div class="form-group row align-items-center justify-content-center" style="margin-top: -20px; margin-left: 5px; margin-right: 5px;">
                <div class="col-1">
                    <img src="{% static 'images/tos.png' %}" alt="Tos" class="mb-3" style="height: 50px;">
                </div>

                <div class="col-4 d-flex justify-content-center align-items-center" >
                    <div class="form-group">
                        <div class="form-group form-check">
                            <input type="checkbox" name="COUGHING" id="COUGHING" class="form-check-input" value="1" {% if COUGHING == '1' %}checked{% endif %}>
                            <label for="COUGHING">Tos</label>
                        </div>                     
                    </div>
                </div>

                <div class="col-7" style="font-size: small; background-color: #dfdfdd; border-radius: 5px; border: 1px solid #c2c3c4; display: flex; flex-direction: column; justify-content: center; text-align: justify;">
                    <p>
                        Marque la casilla si tiene tos frecuente.
                    </p>

                </div>

            </div>


            <!--Campo CHRONIC_DISEASE-->
            <div class="form-group row align-items-center justify-content-center" style="margin-top: -20px; margin-left: 5px; margin-right: 5px;">
                <div class="col-1">
                    <img src="{% static 'images/epoc.jpg' %}" alt="Fatiga" class="mb-3" style="height: 70px;">
                </div>

                <div class="col-4 d-flex justify-content-center align-items-center" >
                    <div class="form-group">
                        <div class="form-group form-check">
                            <input type="checkbox" name="CHRONIC_DISEASE" id="CHRONIC_DISEASE" class="form-check-input" value="1" {% if CHRONIC_DISEASE == '1' %}checked{% endif %}>
                            <label for="CHRONIC_DISEASE">Enfermedades crónicas</label>
                        </div>                     
                    </div>
                </div>

                <div class="col-7" style="font-size: small; background-color: #dfdfdd; border-radius: 5px; border: 1px solid #c2c3c4; display: flex; flex-direction: column; justify-content: center; text-align: justify;">
                    <p>
                        Marque la casilla si tiene alguna enfermedad respiratoria crónica, como por ejemplo, asma, enfermedad pulmonar obstructiva crónica (EPOC), fibrosis pulmonar, síndrome de apnea del sueño, hipertensión pulmonar.
                    </p>

                </div>

            </div>


            <!--Campo SHORTNESS_OF_BREATH-->
            <div class="form-group row align-items-center justify-content-center" style="margin-top: -20px; margin-left: 5px; margin-right: 5px;">
                <div class="col-1">
                    <img src="{% static 'images/disnea.jpg' %}" alt="Disnea" class="mb-3" style="height: 70px;">
                </div>
                <div class="col-4">
                    <div class="form-group form-check">
                        <input type="checkbox" name="SHORTNESS_OF_BREATH" id="SHORTNESS_OF_BREATH" class="form-check-input" value="1" {% if SHORTNESS_OF_BREATH == '1' %}checked{% endif %}>
                        <label for="SHORTNESS_OF_BREATH">Dificultad para respirar</label>
                    </div>
                </div>
                <div class="col-7" style="font-size: small; background-color: #dfdfdd; border-radius: 5px; border: 1px solid #c2c3c4; display: flex; flex-direction: column; justify-content: center; text-align: justify;">
                    <p>
                        Marque la casilla si siente dificultad para respirar.
                    </p>
                </div>
            </div>


            <!--Campo WHEEZING-->
            <div class="form-group row align-items-center justify-content-center" style="margin-top: -20px; margin-left: 5px; margin-right: 5px;">
                <div class="col-1">
                    <audio id="audioPlayer">
                        <source src="{% static 'audios/Sibilancia.mp3' %}" type="audio/mpeg">
                        Tu navegador no soporta la reproducción de audio. Escúchalo en: 
                        <a href="https://www.youtube.com/watch?v=j6e2AtLep_w" target="_blank">Sibilancia</a>
                    </audio>
                    <button type="button" class="btn btn-primary" onclick="playAudio()" style="width: 100px;">Reproducir Audio</button>
                </div>

                <div class="col-4 d-flex justify-content-center align-items-center" >
                    <div class="form-group">
                        <div class="form-group form-check">
                            <input type="checkbox" name="WHEEZING" id="WHEEZING" class="form-check-input" value="1" {% if WHEEZING == '1' %}checked{% endif %}>
                            <label for="WHEEZING">Sibilancia</label>
                        </div>                     
                    </div>
                </div>

                <div class="col-7" style="font-size: small; background-color: #dfdfdd; border-radius: 5px; border: 1px solid #c2c3c4; display: flex; flex-direction: column; justify-content: center; text-align: justify;">
                    <p>
                        Las sibilancias son ruidos respiratorios similares a silbidos. Marque la casilla si se siente estos ruidos (reproduzca el audio para tener una referencia).
                    </p>

                </div>

            </div>


            <!-- Botón para continuar -->
            <div class="d-flex align-items-start justify-content-center mt-4">
                <div class="col-4">
                    <button type="button" class="btn btn-secondary" style="width: 150px;" onclick="history.back();">Atrás</button>

                </div>
                <div class="col-4">
                    <a href="{% url 'home' %}" class="btn btn-primary" style="width: 150px;"><i class="bi bi-house"></i> Home</a>
                </div>
                <div class="col-4">
                    <button type="submit" class="btn btn-primary" style="width: 150px;">Siguiente</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // Función para reproducir el audio
        function playAudio() {
            const audio = document.getElementById('audioPlayer');
            if (audio) {
                audio.play().catch(error => {
                    console.error("Error al reproducir el audio:", error);
                });
            } else {
                console.error("No se encontró el reproductor de audio.");
            }
        }
    </script>
    

</div>
{% endblock %}


